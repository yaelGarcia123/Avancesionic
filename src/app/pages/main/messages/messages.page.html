<ion-content>
  <div class="main-content">
    <!-- Loading -->
    <div *ngIf="loading" class="loading">
      <ion-spinner></ion-spinner>
      <p>Cargando mensajes...</p>
    </div>

    <!-- Chat interface -->
    <div *ngIf="!loading && admin" class="chat-container">
      <!-- Admin info -->
      <div class="admin-info">
        <!-- üîô Bot√≥n regresar (a la izquierda) -->
        <ion-button class="back-btn" fill="clear" [routerLink]="['/home']">
          <ion-icon slot="icon-only" name="arrow-back-outline"></ion-icon>
        </ion-button>

        <ion-icon name="person-circle" size="large"></ion-icon>
        <div class="admin-details">
          <p>Administrador</p>
        </div>
      </div>

      <!-- Messages list -->
      <div class="messages-list">
        <div
          *ngFor="let message of messages"
          class="message"
          [class.my-message]="message.fromUid === currentUserId"
          [class.other-message]="message.fromUid !== currentUserId"
        >
          <div class="message-content">
            <p class="message-text">{{ message.message }}</p>
            <span class="message-time">
              {{ message.timestamp?.toDate() | date:'shortTime' }}
            </span>
          </div>
        </div>
      </div>

      <!-- Input area -->
      <div class="input-container">
        <ion-input
          [(ngModel)]="newMessage"
          placeholder="Escribe tu mensaje..."
          (keyup.enter)="sendMessage()"
        ></ion-input>
        <ion-button (click)="sendMessage()" [disabled]="!newMessage.trim()">
          <ion-icon name="send"></ion-icon>
        </ion-button>
      </div>
    </div>

    <!-- No admin found -->
    <div *ngIf="!loading && !admin" class="empty-state">
      <ion-icon name="warning-outline" size="large"></ion-icon>
      <h3>No hay administrador disponible</h3>
      <p>Por favor intenta m√°s tarde</p>
    </div>
  </div>
</ion-content>
